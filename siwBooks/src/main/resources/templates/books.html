<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Libreria</title>
</head>
<body>

    <h2>üìö La Nostra Collezione</h2>

    <!-- Pulsante visibile solo agli ADMIN -->
    <div sec:authorize="hasAuthority('ADMIN')">
        <a th:href="@{/admin/formAddBook}">‚ûï Nuovo Libro</a>
    </div>

    <!-- Lista dei libri -->
    <div>
        <div th:if="${books.isEmpty()}">Non ci sono libri nel sistema</div>
        <ul>
            <li th:each="book : ${books}">
                <div>
                    <a th:href="@{'/book/' + ${book.id} + '?from=/book'}">
                        <div>
                            <img th:if="${book.cover}" th:src="@{'/images/' + ${book.cover.id}}" alt="Copertina libro" width="100"/>
                        </div>
                        <div>
                            <strong th:text="${book.title}">Titolo</strong>
                            <span th:text="${book.yearOfPublication}">Anno</span>
                        </div>
                    </a>
                </div>
            </li>
        </ul>
    </div>

    <!-- Link semplice per tornare alla home -->
    <br>
    <a th:href="@{/}">üè† Torna alla Home</a>

</body>
</html>
